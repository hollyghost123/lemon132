!function(t){var e=0;var r=function(t){this.option={draggable:true,parent:"body",space_insert:true,drag_arr:[],replace:false};this.extend(this.option,t);this.initEvent()};r.prototype.extend=function(t,e){for(var r in e){t[r]=e[r]}};r.prototype.querySelector=function(t){if(document.querySelector){return document.querySelector(t)}else{var e;var r=function(t,e){var r=e?e:document;return/^\.\w+$/gi.test(t)?r.getElementsByClassName(t.slice(1))[0]:/^\#\w+$/gi.test(t)?r.getElementById(t.slice(1)):r.getElementsByTagName(t)};return/\s*\w+\s+\w+\s*/gi.test(t)?(t=t.replace(/^\s+|\s+$/gi,""),t=t.split(/\s+/gi)&t.forEach(function(t,s){if(!e)e=r(t);else e=r(t,e)}),e):r(t)}};r.prototype.hasClass=function(t,e){var r=new RegExp("(^|\\s)"+e+"(\\s|$)");return r.test(t.className)};r.prototype.addClass=function(t,e){if(this.hasClass(t,e)){return}var r=t.className.split(" ");r.push(e);t.className=r.join(" ")};r.prototype.removeClass=function(t,e){if(!this.hasClass(t,e)){return}var r=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(r," ").replace(/^\s+|\s+$/gi,"")};r.prototype.initEvent=function(){var t=this;this.dragWrap=this.querySelector(this.option.parent);if(this.option.space_insert&&(!this.option.spaceClass||!this.querySelector("."+this.option.spaceClass,this.dragWrap)))this.option.space_insert=false;this.draglist=this.dragWrap.children;var e=arguments[0]?"remove":"add";for(var r=0;r<this.draglist.length;r++){this.draglist[r].draggable=!arguments[0]}this.addClass(this.dragWrap,"dragWrap");var s=function(r){t.dragWrap[e+"EventListener"](r,t,false)};var i=["dragstart","dragover","dragenter","drop"];if(!window.ActiveXObject&&!("ActiveXObject"in window)){i.push("mouseenter","mouseleave")}else{document.body.ondragover=function(){event.preventDefault()};document.body.ondrop=function(){var e=t.querySelector(".drag_active");if(e)t.removeClass(e,"drag_active")}}i.forEach(function(t){s(t)})};r.prototype.findTarget=function(t,e){var r=t.target;if(this.hasClass(r,"dragWrap"))return false;while(r.parentNode&&!this.hasClass(r.parentNode,"dragWrap")){if(this.option.space_insert&&e&&this.hasClass(r.parentNode.parentNode,"dragWrap"))return r;r=r.parentNode}if(r.parentNode)return r;else return false};r.prototype.destory=function(t){this.initEvent(true)};r.prototype._mouseenter=function(t){if(this.mountStart)this.startObj=this.mountStart};r.prototype._mouseleave=function(t){if(this.startObj)this.mountStart=this.startObj,delete this.startObj;var e=this.querySelector(".drag_active");if(e)this.removeClass(e,"drag_active")};r.prototype._dragstart=function(t){this.startObj=this.findTarget(t)};r.prototype._dragover=function(t){event.preventDefault()};r.prototype._dragenter=function(t){this.enterObj=this.findTarget(t,true);console.log(this.enterObj);if(!this.enterObj||!this.startObj)return;var e=this.querySelector(".drag_active");if(e)this.removeClass(e,"drag_active");this.addClass(this.enterObj,"drag_active")};r.prototype._drop=function(t){var e=this.querySelector(".drag_active");if(e)this.removeClass(e,"drag_active");this.arr=this.option.drag_arr;var r=this.arr.length;this.enterObj=this.findTarget(t,true);if(!this.enterObj||!this.startObj)return;this.draglist=this.dragWrap.children;var s=this.draglist;var i=s.length;var a=this.enterObj;var n=this.option.spaceClass&&this.hasClass(this.enterObj,this.option.spaceClass);this.enterObj=this.option.space_insert?this.enterObj.parentNode:this.enterObj;var o=this.index(this.enterObj,s);var h=this.index(this.startObj,s);if(this.option.replace&&!n){var p=this.enterObj.cloneNode(true);var l=this.startObj.cloneNode(true);this.dragWrap.replaceChild(l,this.enterObj);this.dragWrap.replaceChild(p,this.startObj);var c=this.arr[o];this.arr.splice(o,1,this.arr[h]);this.arr.splice(h,1,c);return}if(r){var c=this.arr[h];this.arr.splice(h,1)}if(o>=h){if(o==0){if(r)this.arr.splice(o,0,c);this.dragWrap.insertBefore(this.startObj,this.enterObj);return}o--;if(r)this.arr.splice(o+1,0,c);this.after(this.startObj,this.enterObj)}else{if(n){o++;if(o==i-1&&h==i-1){this.arr.splice(o,0,c)}if(r)this.arr.splice(o,0,c);return this.after(this.startObj,this.enterObj)}if(r)this.arr.splice(o,0,c);this.dragWrap.insertBefore(this.startObj,this.enterObj)}};r.prototype.after=function(t,e){var r=this.dragWrap;if(r.lastChild==e){r.appendChild(t)}else{r.insertBefore(t,e.nextSibling)}};r.prototype.index=function(t,e){for(var r=0;r<e.length;r++){if(e[r]==t){return r}}};r.prototype.handleEvent=function(t){var e="_"+t.type;if(typeof this[e]=="function")this[e](t);var r=this.option[e];if(typeof r=="function")r(this,t)};Object.defineProperty(t,"dragJs",{configurable:true,enumerable:true,value:r})}(this);